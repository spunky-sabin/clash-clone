<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clash Progress Tracker</title>
    <link rel="stylesheet" href="clash_ninja_styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <!-- Village Overview Panel -->
        <section class="village-overview">
            <div class="village-header">
                <div class="village-name-tag">
                    <div class="village-name">
                        <span id="villageName">Black Devil</span>
                        <i class="fas fa-share-alt share-icon" title="Share"></i>
                    </div>
                    <div class="player-tag">
                        <span id="playerTag">#LJYG9VPQY</span>
                        <a href="#" class="external-link" id="playerLink"><i class="fa-solid fa-external-link"></i></a>
                    </div>
                </div>

                <div class="th-display">
                    <div class="th-image-container">
                        <img id="thImage" src="/images/entities/1_18.png" alt="Town Hall" class="th-image">
                    </div>
                    <div class="th-level-badge" id="thBadge">Town Hall 18</div>
                </div>

                <div class="upload-btn" id="debugBtn" style="background:#fb923c; margin-right: 1rem;">
                    <i class="fas fa-bug"></i>
                    <span>Debug</span>
                </div>
                <div class="upload-btn" id="statsBtn" style="background:var(--accent-blue); margin-right: 1rem;">
                    <i class="fas fa-chart-bar"></i>
                    <span>Stats</span>
                </div>
                <div class="upload-btn" id="uploadBtn">
                    <i class="fas fa-upload"></i>
                    <span>Upload</span>
                </div>
            </div>

            <div class="village-stats">
                <div class="stat-badge">
                    <i class="far fa-clock"></i>
                    <span>Day: <span id="dayCount">23</span></span>
                </div>
                <div class="stat-badge">
                    <i class="fa-solid fa-check"></i>
                    <span>API Info Valid</span>
                </div>
            </div>

            <!-- Progress Overview -->
            <div class="progress-overview">
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Structures</span>
                        <span class="progress-percent" id="percent-structures">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill structures" id="fill-structures"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Supercharge</span>
                        <span class="progress-percent" id="percent-supercharge">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill supercharge" id="fill-supercharge"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Crafted Def.</span>
                        <span class="progress-percent" id="percent-crafted">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill crafted" id="fill-crafted"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Lab</span>
                        <span class="progress-percent" id="percent-lab">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill lab" id="fill-lab"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Heroes</span>
                        <span class="progress-percent" id="percent-heroes">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill heroes" id="fill-heroes"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Equipment</span>
                        <span class="progress-percent" id="percent-equipment">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill equipment" id="fill-equipment"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Pets</span>
                        <span class="progress-percent" id="percent-pets">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill pets" id="fill-pets"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Walls</span>
                        <span class="progress-percent" id="percent-walls">--%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill walls" id="fill-walls"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Category Navigation -->
        <section class="category-nav">
            <div class="category-tabs">
                <button class="category-tab active" data-category="defenses">Defenses</button>
                <button class="category-tab" data-category="structures">Structures</button>
                <button class="category-tab" data-category="lab">Lab</button>
                <button class="category-tab" data-category="heroes">Heroes</button>
                <button class="category-tab" data-category="equipment">Equipment</button>
                <button class="category-tab" data-category="pets">Pets</button>
                <button class="category-tab" data-category="walls">Walls</button>
            </div>

            <div class="filter-controls">
                <label class="filter-checkbox">
                    <input type="checkbox" id="hideMaxed">
                    <span>Hide Maxed</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" id="hideSupercharge">
                    <span>Hide Supercharges</span>
                </label>
                <input type="text" class="search-bar" id="searchBar" placeholder="E.g. Barbarian Puppet">
            </div>
        </section>

        <!-- Upgrade Tables Container -->
        <div id="upgradeTablesContainer">
            <!-- Tables will be dynamically rendered here -->
        </div>
    </div>

    <!-- Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Upload Village Data</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <textarea class="json-textarea" id="jsonInput"
                placeholder="Paste your village JSON data here..."></textarea>
            <div class="modal-actions">
                <button class="btn-primary" id="parseBtn">Analyze Village</button>
                <button class="btn-secondary" id="demoBtn">Load Demo Data</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="calc_structures.js"></script>
    <script src="calc_lab.js"></script>
    <script src="calc_heroes.js"></script>
    <script src="calc_heroes_cost.js"></script>
    <script src="calc_equipment.js"></script>
    <script src="calc_pets.js"></script>
    <script src="calc_walls.js"></script>
    <script src="analyze_upgrades.js"></script>
    <script src="upgrade_tracker_ui.js"></script>
    <script src="render_stats.js"></script>
    <script src="render_debug.js"></script>
    <script src="script.js"></script>
</body>

</html>